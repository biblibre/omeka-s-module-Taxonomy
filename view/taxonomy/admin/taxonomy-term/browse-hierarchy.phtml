<?php
$translate = $this->plugin('translate');
$escape = $this->plugin('escapeHtml');
$this->htmlElement('body')->appendAttribute('class', 'taxonomy-terms browse browse-hierarchy');
$this->headLink()->appendStylesheet($this->assetUrl('css/jstree.css', 'Omeka'));
$this->headScript()->appendFile($this->assetUrl('vendor/jstree/jstree.min.js', 'Omeka'));
$this->headScript()->appendFile($this->assetUrl('js/taxonomy-term-tree.js', 'Taxonomy'));
?>

<?php echo $this->pageTitle($translate('Taxonomy terms'), 1, $translate($taxonomy->displayTitle())); ?>

<div id="page-actions">
    <?php echo $this->hyperlink($translate('View as list'), $this->url('admin/taxonomy-term', [], ['query' => ['taxonomy_id' => $taxonomy->id()]]), ['class' => 'button']); ?>

    <?php if ($this->userIsAllowed('Taxonomy\Api\Adapter\TaxonomyTermAdapter', 'create')): ?>
        <?php echo $this->hyperlink($translate('Add new taxonomy term'), $this->url('admin/taxonomy-id', ['id' => $taxonomy->id(), 'action' => 'add-term']), ['class' => 'button']); ?>
    <?php endif; ?>
</div>

<?php $this->trigger('view.browse-hierarchy.before'); ?>

<div class="taxonomy-term-tree" data-taxonomy-id="<?= $taxonomy->id() ?>"></div>

<?php $this->trigger('view.browse-hierarchy.after'); ?>

<div id="sidebar" class="sidebar">
    <?php echo $this->hyperlink('', '#', [
        'class' => 'sidebar-close o-icon-close',
        'title' => $translate('Close'),
    ]); ?>
    <div class="sidebar-content"></div>
</div>
